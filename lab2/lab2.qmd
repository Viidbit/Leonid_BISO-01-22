---
title: "Основы обработки данных с помощью R и Dplyr"
subtitle: ""
author: "leonid4216244@gmail.com"
format: 
  md:
    output-file: README.md
---

## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных
2.  Закрепить знания базовых типов данных языка R
3.  Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()

## Исходные данные

1.  Программное обеспечение Windows 10 Pro
2.  Visual Studio Code с установленными плагинами для работы с языком R
3.  Интерпретатор языка R 4.5.1

## План

Проанализировать встроенный в пакет dplyr набор данных starwars с помощью языка R и ответить на вопросы

## Шаги:

1.  Загрузка библиотеки

    ```{r}
    library(dplyr)
    ```

2.  Сколько строк в датафрейме?

    ```{r}
    starwars %>% ncol()
    ```

3.  Как просмотреть примерный вид датафрейма?

    ```{r}
    starwars %>% glimpse()
    ```

4.  Сколько уникальных рас персонажей (species) представлено в данных?

    ```{r}
    starwars %>%
        select(species) %>%
        unique() %>%
        nrow()
    ```

5.  Найти самого высокого персонажа

    ```{r}
    starwars %>%
        filter(!is.na(height)) %>%
        arrange(desc(height)) %>%
        head(1)
    ```

6.  Найти всех персонажей ниже 170

    ```{r}
    starwars[starwars$height < 170, ]
    ```

7.  Подсчитать ИМТ (индекс массы тела) для всех персонажей. ИМТ подсчитать по формуле

    ```{r}
    starwars %>%
        mutate(BMI = mass / (height^2)) %>%
        select(name, height, mass, BMI)
    ```

8.  Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей

    ```{r}
   starwars %>%
        filter(!is.na(mass), !is.na(height), height > 0) %>%
        mutate(stretchiness = mass / height) %>%
        slice_max(stretchiness, n = 10)
    ```

9.  Найти средний возраст персонажей каждой раcы вселенной Звездных войн

    ```{r}
    starwars %>%
        mutate(age = 100 + birth_year) %>%
        group_by(species) %>%
        summarise(Avg_age = median(age, na.rm = TRUE))
    ```

10. Найти самый распространенный цвет глаз персонажей вселенной Звездных войн

    ```{r}
    starwars %>%
        group_by(eye_color) %>%
        summarise(n = n()) %>%
        arrange(desc(n)) %>%
        head(1)
    ```

11. Подсчитать среднюю длину имени в каждой расе

    ```{r}
    starwars %>%
        filter(!is.na(species), !is.na(name)) %>%
        mutate(name_length = nchar(name)) %>%
        group_by(species) %>%
        summarise(avg_name_length = mean(name_length))
    ```

## Оценка результата

В результате лабораторной работы мы преобрели необходимые навыки работы с языком R для обработки данных и закрепили знания базовых типов данных языка R

## Вывод

Таким образом, мы развили практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()